# f3 removable drives

## f3s1 drive online
### if
* [*archive*](glossary.md#archive) mounted with file
### when
* sync runs
### then
* [*doc*](glossary.md#doc) shows `archive=true` and drive marker written

## f3s2 unplugged
### if
* drive indexed then unmounted
### when
* sync runs
### then
* [*doc*](glossary.md#doc) `online=false` marker unchanged

## f3s3 reattach with file
### if
* drive previously unplugged with file
### when
* drive remounted and sync runs
### then
* [*doc*](glossary.md#doc) `online=true` marker refreshed

## f3s4 reattach without file
### if
* drive remounted missing file
### when
* sync runs
### then
* [*doc*](glossary.md#doc) removed
* drive marker `ready`

## f3s5 add file online
### if
* drive mounted
### when
* new file added and sync runs
### then
* new [*doc*](glossary.md#doc) created
* drive marker shows pending

## f3s6 duplicate paths
### if
* identical bytes in and out of [*archive*](glossary.md#archive)
### when
* sync runs
### then
* one [*doc*](glossary.md#doc) with `archive=false`

## f3s7 online deleted archive offline
### if
* archived file also has online copy
### when
* online copy deleted and drive unmounted
### then
* [*doc*](glossary.md#doc) `online=false` remains searchable

## f3s8 archive renamed
### if
* drive unmounted then remounted under new name
### when
* sync runs
### then
* symlinks and marker rename to new path

## f3s9 independent drives
### if
* multiple drives present/unplugged
### when
* sync runs
### then
* markers and flags independent per drive

## f3s10 change archive directory
### if
* archive moved and env updated
### when
* stack restarts and sync runs
### then
* markers and symlinks follow new path

## f3s11 status files ignored
### if
* dummy `*-status-ready` file created
### when
* sync runs
### then
* no [*doc*](glossary.md#doc) created

## f3s12 module update requeue
### if
* module UID changes
### when
* stack restarts
### then
* files requeued and markers flip pending then ready
